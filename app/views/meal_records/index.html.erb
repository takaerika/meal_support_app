<h2><%= @date.strftime("%Y/%m/%d") %> の食事記録</h2>

<% if @records.any? %>
  <ul class="meal-list"
    data-controller="record-toggle"
    data-record-toggle-frame-id-value="record_detail">
  <% @records.each do |r| %>
    <li class="meal-item">
      <%= link_to meal_record_path(r),
          class: "meal-link",
          data: {
            turbo_frame: "record_detail",          # ← JS不在でも開ける保険
            action: "click->record-toggle#toggle", # ← JSが動く時は上書き
            record_id: r.id
          } do %>
        <span class="meal-slot-badge"><%= t("activerecord.enums.meal_record.slot.#{r.slot}") %></span>
        <span class="meal-text"><%= meal_summary(r) %></span>
      <% end %>
    </li>
  <% end %>
</ul>

<turbo-frame id="record_detail"></turbo-frame>
<% else %>
  <p>記録はありません</p>
<% end %>