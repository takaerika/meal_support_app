<% if @date.present? %>
  <!-- 日別の食事記録リスト -->
  <h2><%= @date.strftime("%Y/%m/%d") %> の食事記録</h2>

  <% if @records.any? %>
    <ul class="meal-list">
      <% @records.each do |r| %>
        <li class="meal-item">
          <%= link_to r, class: "meal-link" do %>
            <span class="meal-slot-badge">
              <%= t("activerecord.enums.meal_record.slot.#{r.slot}") %>
            </span>

            <span class="meal-text"><%= meal_summary(r) %></span>
          <% end %>
        </li>
      <% end %>
    </ul>
  <% else %>
    <p>記録はありません</p>
  <% end %>

  <div class="nav-actions">
    <%= link_to "カレンダーに戻る", root_path(year: @date.year, month: @date.month) %>
  </div>

<% else %>
  <!-- カレンダー -->
  <%= render "shared/calendar",
    current_month: @month, prev_month: @prev_month, next_month: @next_month,
    first_wday: @first_wday, last_day: @last_day,
    month_path: ->(opts = {}) { meal_records_path(opts) },
    day_path:   ->(opts = {}) { meal_records_path(opts) } %>
<% end %>
