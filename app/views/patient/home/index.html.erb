<div class="container">
  <header class="header">
    <h1>é£Ÿäº‹ã®ãã‚ã</h1>
    <div class="user-info">
      ã“ã‚“ã«ã¡ã¯ã€<%= current_user.full_name %> ã•ã‚“
    </div>
  </header>

  <%= render "shared/calendar",
             current_month: @month,
             prev_month: @prev_month,
             next_month: @next_month,
             first_wday: @first_wday,
             last_day: @last_day,
             base_path: meal_records_path %>

  <%# æ–°ç€ã‚³ãƒ¡ãƒ³ãƒˆï¼ˆä»»æ„ï¼‰ %>
  <section class="comment-section">
    <p><strong>ã‚µãƒãƒ¼ã‚¿ãƒ¼ã‹ã‚‰ã®æ–°ç€ã‚³ãƒ¡ãƒ³ãƒˆğŸ””</strong></p>
    <% if @latest_comment.present? %>
      <p>
        <%= @latest_comment.user.last_name %>ã•ã‚“ï¼š
        ã€Œ<%= @latest_comment.body %>ã€
        <small><%= l(@latest_comment.created_at, format: :short) %></small>
      </p>
    <% else %>
      <p>ã¾ã ã‚³ãƒ¡ãƒ³ãƒˆã¯ã‚ã‚Šã¾ã›ã‚“</p>
    <% end %>
  </section>
</div>

<!-- ãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒœã‚¿ãƒ³ -->
<%= link_to "ï¼‹ ä»Šæ—¥ã®é£Ÿäº‹",
            new_meal_record_path(date: Date.current),
            class: "floating-button" %>

<%# ====== ç°¡æ˜“ã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆMVPç”¨ï¼å¾Œã§CSSã«åˆ‡ã‚Šå‡ºã—ï¼‰ ====== %>
<style>
  .container { max-width: 820px; margin: 0 auto; background:#fff; padding:16px; border-radius:8px; }
  .header { display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid #eee; padding-bottom:10px; margin-bottom:16px; }
  .header h1 { font-size:20px; margin:0; color:#2c5e46; }
  .goal-section { background:#e6f3ed; padding:12px; border-radius:8px; margin-bottom:16px; }
  .goal-section h2 { margin:0; font-size:16px; color:#2c5e46; }

  .calendar-header { display:flex; align-items:center; justify-content:center; gap:12px; margin-bottom:8px; }
  .calendar-header h3 { margin:0; }
  .month-nav { text-decoration:none; font-size:18px; padding:4px 8px; }

  .calendar { display:grid; grid-template-columns: repeat(7, 1fr); gap:6px; }
  .day-name { font-weight:bold; text-align:center; background:transparent; border:none; }
  .empty { background:transparent; }

  .day-cell { padding:10px; background:#f9f9f9; border:1px solid #ddd; border-radius:6px; cursor:pointer; min-height:56px; position:relative; }
  .day-cell:hover { background:#f1f5f1; }
  .day-cell.today { background:#a0d4b5; color:#fff; font-weight:bold; }
  .day-number { position:absolute; top:6px; right:8px; font-size:12px; }

  .actions { text-align:center; margin-top:18px; }
  .action-button { display:inline-block; padding:12px 20px; background:#4CAF50; color:#fff; border-radius:9999px; text-decoration:none; font-weight:700; }
  .action-button:hover { background:#45a049; }

  .comment-section { margin-top:18px; padding:12px; background:#fffbeb; border:1px solid #fdd835; border-radius:8px; }
  .floating-button {
  position: fixed;
  bottom: 20px;
  right: 20px;
  background: #4CAF50;
  color: white;
  font-size: 16px;
  font-weight: bold;
  padding: 14px 20px;
  border-radius: 9999px;
  text-decoration: none;
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
  z-index: 1000; /* å¸¸ã«å‰é¢ */
}

.floating-button:hover {
  background: #45a049;
}
</style>