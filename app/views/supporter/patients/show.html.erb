<header class="header">
  <h1><%= @patient.full_name %> さんの食事記録</h1>
  <div class="user-info">
    サポーター: <%= current_user.full_name %>
  </div>
</header>

<!-- カレンダー（このページ内で月送り＆日付クリックもこのページに留める） -->
<%= render "shared/calendar",
  current_month: @month, prev_month: @prev_month, next_month: @next_month,
  first_wday: @first_wday, last_day: @last_day,
  month_path: ->(opts = {}) { supporter_patient_path(@patient, opts) },
  day_path:   ->(opts = {}) { supporter_patient_path(@patient, opts) } %>

<!-- 選択日の記録一覧 -->
<section class="record-list">
  <h2><%= @date.strftime("%Y年%m月%d日") %> の食事記録</h2>

  <% if @records.any? %>
    <ul class="meal-list">
      <% @records.each do |r| %>
        <li class="meal-item">
          <%= link_to meal_record_path(r), class: "meal-link" do %>
            <span class="meal-slot-badge">
              <%= t("activerecord.enums.meal_record.slot.#{r.slot}") %>
            </span>
            <span class="meal-text"><%= meal_summary(r) %></span>
          <% end %>
        </li>
      <% end %>
    </ul>
  <% else %>
    <p>記録はありません</p>
  <% end %>
</section>